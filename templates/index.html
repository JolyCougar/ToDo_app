<!DOCTYPE html>
{% load static %}
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To Do App</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}" type="text/css" media="all">
</head>
<style>
    .header-info {
    display: flex;
    align-items: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
}

.user-profile {
    display: flex;
    align-items: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∞–≤–∞—Ç–∞—Ä –∏ –∏–º—è –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
    text-decoration: none; /* –£–±–∏—Ä–∞–µ–º –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ */
    color: var(--gray-dark); /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
    margin-right: 20px; /* –û—Ç—Å—Ç—É–ø —Å–ø—Ä–∞–≤–∞ –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Å –¥–∞—Ç–æ–π */
}

.user-avatar {
    width: 70px; /* –®–∏—Ä–∏–Ω–∞ –∞–≤–∞—Ç–∞—Ä–∫–∏ */
    height: 70px; /* –í—ã—Å–æ—Ç–∞ –∞–≤–∞—Ç–∞—Ä–∫–∏ */
    border-radius: 50%; /* –ö—Ä—É–≥–ª–∞—è —Ñ–æ—Ä–º–∞ */
    margin-right: 5px; /* –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–π –æ—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –∞–≤–∞—Ç–∞—Ä–æ–º –∏ –∏–º–µ–Ω–µ–º */
}

.task-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 15px;
    margin-bottom: 10px;
    border-radius: var(--border-radius);
    background-color: var(--gray-light);
    box-shadow: var(--box-shadow);
    transition: background-color 0.3s;
}

.task-item input[type="checkbox"] {
    margin-right: 5px; /* –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–π –æ—Ç—Å—Ç—É–ø –º–µ–∂–¥—É —á–µ–∫–±–æ–∫—Å–æ–º –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ–º –∑–∞–¥–∞—á–∏ */
    cursor: pointer; /* –£–∫–∞–∑–∞—Ç–µ–ª—å –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
}

</style>
<body>
<div class="container">
    <header>
    <div class="header-info">
        <a href="{% url 'my_auth:profile' pk=user.pk %}" class="user-profile">
            <div class="avatar-container">
                
                {% if user.profile.avatar %}
                    <img src="{{ user.profile.avatar.url }}" alt="–ê–≤–∞—Ç–∞—Ä" id="userAvatar"
                         class="user-avatar">
                {% else %}
                    <img src="{% static 'images/default_avatar.png' %}" alt="–ê–≤–∞—Ç–∞—Ä" id="userAvatar"
                         class="user-avatar">
                {% endif %}
                
                
                <!-- –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –ø—É—Ç—å –∫ –∞–≤–∞—Ç–∞—Ä—É -->
            </div>
            <span id="username">{{ user.username }}</span> <!-- –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
        </a>
        <span id="dateDisplay"></span> <!-- –≠–ª–µ–º–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞—Ç—ã -->
        <span id="taskCount" style="margin-left: 20px;">–ù–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏: <span id="incompleteCount">0</span></span>
        <form method="post" action="{% url 'my_auth:logout' %}" class="logout-form">
            {% csrf_token %}
            <button type="submit" class="small-button">–í—ã–π—Ç–∏</button>
        </form>
    </div>

    <div class="header-buttons">
        <button class="settings" id="settingsBtn">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        <button class="large-button" id="addTaskButton">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</button>
    </div>
</header>


    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
    <div id="modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" id="closeModal">&times;</span>
            <h2>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É</h2>
            <form id="taskForm" novalidate>
                {% csrf_token %}
                <input type="text" id="taskInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏" required>
                <textarea id="taskDescription" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏"></textarea>
                <button id="confirmAddTask" type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
    <div id="settingsModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" id="closeSettingsModal">&times;</span>
            <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
            <form id="settingsForm" novalidate>
                <div class="form-group">
                    <label for="fontSelect">–®—Ä–∏—Ñ—Ç:</label>
                    <select id="fontSelect">
                        <option value="Arial">Arial</option>
                        <option value="Courier New">Courier New</option>
                        <option value="Georgia">Georgia</option>
                        <option value="Times New Roman">Times New Roman</option>
                        <option value="Verdana">Verdana</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="fontSizeSelect">–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞:</label>
                    <select id="fontSizeSelect">
                        <option value="14">14px</option>
                        <option value="16" selected>16px</option>
                        <option value="18">18px</option>
                        <option value="20">20px</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="showCompletedTasks" checked>
                        –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
                    </label>
                </div>

                <div class="form-group">
                    <label for="backgroundSelect">–§–æ–Ω:</label>
                    <select id="backgroundSelect">
                        <option value="default">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é</option>
                        <option value="background1">–§–æ–Ω 1</option>
                        <option value="background2">–§–æ–Ω 2</option>
                        <option value="background3">–§–æ–Ω 3</option>
                        <option value="custom">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ñ–æ–Ω</option>
                    </select>
                </div>
                <div class="form-group" id="customBackgroundGroup" style="display: none;">
                    <label for="customBackgroundInput" class="file-input-label">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–æ–π —Ñ–æ–Ω:</label>
                    <input type="file" id="customBackgroundInput" accept="image/*" class="file-input">
                </div>

                <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
            </form>
        </div>
    </div>

    <main>
        <section>
            <h2>–ù–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏</h2>
            <ul class="task-list" id="taskList">
                {% for task in task_list %}
                    {% if not task.complete %}
                        <li class="task-item" data-task-id="{{ task.id }}">
                                                        <input type="checkbox" id="task{{ task.id }}">
                            <label for="task{{ task.id }}">{{ task.name }}</label>
                            <span class="task-details">
                                <span>{{ task.description }}</span>
                            </span>
                            <button class="delete-task" aria-label="–£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É">üóëÔ∏è</button>
                        </li>
                    {% endif %}
                {% endfor %}
            </ul>
        </section>

        <section>
            <h2>
                –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
                <button id="toggleCompletedList" aria-label="–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á">–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å</button>
            </h2>
            <ul class="completed-list" id="completedList">
                {% for task in task_list %}
                    {% if task.complete %}
                        <li class="completed-item" data-task-id="{{ task.id }}">
                            <span class="completed-label">{{ task.name }}</span>
                            <span class="completed-label">{{ task.description }}</span>
                            <button class="delete-task" aria-label="–£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É">üóëÔ∏è</button>
                        </li>
                    {% endif %}
                {% endfor %}
            </ul>
        </section>
    </main>
</div>

<div class="cookie-banner" id="cookieBanner">
    <p>–≠—Ç–æ—Ç —Å–∞–π—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç cookies –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞.
        <button id="acceptCookies">–ü—Ä–∏–Ω—è—Ç—å</button>
    </p>
</div>

<script src="{% static 'js/scripts.js' %}"></script>
</body>
</html>

